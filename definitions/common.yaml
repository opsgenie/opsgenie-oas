##################
#     REQUEST    #
##################
BaseRequest:
  type: object

##################
#    RESPONSE    #
##################
BaseResponse:
  type: object
  required:
    - requestId
    - took
  properties:
    requestId:
      type: string
    took:
      type: number
      format: float
      default: 0.0

BaseResponseWithExpandable:
  type: object
  required:
    - expandable
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        expandable:
          type: array
          items:
            type: string

ErrorResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        message:
          type: string
        code:
          type: integer
          format: int32
        responseHeaders:
          type: object
          additionalProperties:
            type: array
            items:
              type: string

SuccessResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        result:
          type: string
        data:
          type: object
          allOf:
            - $ref: '#/definitions/SuccessData'

##################
#      MODEL     #
##################
SuccessData:
  type: object
  properties:
    id:
      type: string
    name:
      type: string

PageDetails:
  type: object
  properties:
    prev:
      type: string
    next:
      type: string
    first:
      type: string
    last:
      type: string

Recipient:
  type: object
  discriminator: type
  required:
    - type
  properties:
    type:
      type: string
      enum:
        - all
        - none
        - user
        - escalation
        - schedule
        - team
        - group
    id:
      type: string

TeamRecipient:
  x-discriminator-value: team
  description: Team recipient
  allOf:
  - $ref: '#/definitions/Recipient'
  - type: object
    properties:
      name:
        type: string
      type:
        default: team

GroupRecipient:
  x-discriminator-value: group
  description: Group recipient
  allOf:
  - $ref: '#/definitions/Recipient'
  - type: object
    properties:
      name:
        type: string
      type:
        default: group

ScheduleRecipient:
  x-discriminator-value: schedule
  description: Schedule recipient
  allOf:
  - $ref: '#/definitions/Recipient'
  - type: object
    properties:
      name:
        type: string
      type:
        default: schedule

EscalationRecipient:
  x-discriminator-value: escalation
  description: Escalation recipient
  allOf:
  - $ref: '#/definitions/Recipient'
  - type: object
    properties:
      name:
        type: string
      type:
        default: escalation

UserRecipient:
  x-discriminator-value: user
  description: User recipient
  allOf:
  - $ref: '#/definitions/Recipient'
  - type: object
    properties:
      username:
        type: string
      type:
        default: user

NoRecipient:
  x-discriminator-value: none
  description: No recipient
  allOf:
  - $ref: '#/definitions/Recipient'

AllRecipient:
  x-discriminator-value: all
  description: All recipient
  allOf:
  - $ref: '#/definitions/Recipient'

TimeRestrictionInterval:
  type: object
  discriminator: type
  required:
    - type
  properties:
    type:
      type: string
      enum:
        - weekday-and-time-of-day
        - time-of-day

WeekdayTimeRestrictionInterval:
  type: object
  x-discriminator-value: weekday-and-time-of-day
  description: Weekday time restriction interval
  allOf:
    - $ref: '#/definitions/TimeRestrictionInterval'
    - type: object
      properties:
        restrictions:
          type: array
          items:
            $ref: '#/definitions/WeekdayTimeRestriction'
          minItems: 1
          maxItems: 15
        type:
          default: weekday-and-time-of-day

TimeOfDayRestrictionInterval:
  type: object
  x-discriminator-value: time-of-day
  description: Time of day restriction interval
  allOf:
    - $ref: '#/definitions/TimeRestrictionInterval'
    - type: object
      properties:
        restriction:
          $ref: '#/definitions/TimeOfDayRestriction'
        type:
          default: time-of-day

WeekdayTimeRestriction:
  type: object
  properties:
    startDay:
      type: string
      enum:
        - monday
        - tuesday
        - wednesday
        - thursday
        - friday
        - saturday
        - sunday
    startHour:
      type: integer
      format: int32
    startMin:
      type: integer
      format: int32
    endDay:
      type: string
      enum:
        - monday
        - tuesday
        - wednesday
        - thursday
        - friday
        - saturday
        - sunday
    endHour:
      type: integer
      format: int32
    endMin:
      type: integer
      format: int32

TimeOfDayRestriction:
  type: object
  properties:
    startHour:
      type: integer
      format: int32
    startMin:
      type: integer
      format: int32
    endHour:
      type: integer
      format: int32
    endMin:
      type: integer
      format: int32

Duration:
  type: object
  required:
    - timeAmount
  properties:
    timeAmount:
      type: integer
      format: int64
    timeUnit:
      type: string
      enum:
        - days
        - hours
        - minutes
        - seconds
        - miliseconds
        - micros
        - nanos
      default: minutes